<%-include('../../layout/header.ejs')%>

<div class="untree_co-section before-footer-section">
  <%if(cart===null || cart.items.length==0){%>
    <h1 class=" d-flex justify-content-center">No items in Cart</h1>

  <%}else{%>
    <div class="container">
      <div class="row ">
        <!-- <form class="col-md-12" method="post"> -->
          <div class="site-blocks-table">

              <table class="table ">
                <thead>
                  <tr>
                    <th class="product-thumbnail">Image</th>
                    <th class="product-name">Product</th>
                    <th class="product-price">Price</th>
                    <th class="product-quantity">Quantity</th>
                    <th class="product-remove">Remove</th>
                  </tr>
                </thead>
                <tbody>
                  <%for(let i=0;i<cart.items.length;i++){%>
                    <%let eachItem=cart.items[i]%>
                    <tr>
                      <td class="product-thumbnail">
                        <img src="/public/uploads/<%=eachItem.productId.image%>" alt="Image" class="img-fluid">
                      </td>
                      <td class="product-name">
                        <h2 class="h5 "><%=eachItem.productId.name%></h2>
                      </td>
                      <td><%=eachItem.productId.price%></td>
                      <td>
                        <div class="input-group mb-3 d-flex align-items-center quantity-container" style="max-width: 120px;">
                          <div class="input-group-prepend">                                     
                              <form action="/decQty" method="post">
                                <input type="hidden" name="id" value="<%=eachItem.productId._id%>">
                                <button class="btn btn-outline-black decrease" type="submit">&minus;</button>
                              </form>
                          </div>
                          <input type="text" class="form-control  center quantity-amount" value="<%=eachItem.qty%>" readonly placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1">
                          <div class="input-group-append">
                            <form action="/addToCart" method="post">
                              <input type="hidden" name="id" value="<%=eachItem.productId._id%>">
                              <button class="btn btn-outline-black increase" type="submit">&plus;</button>
                            </form>
                          </div>

                        </div>
                      </td>
                      <td>
                        <form action="" method="post">
                          <input type="hidden" name="proId" value="<%=eachItem.productId._id%>">
                          <input type="submit" value="X">
                          <!-- btn btn-black btn-sm -->
                        </form>
                    </tr>
                  <%}%>
        
                </tbody>
              </table>
          </div>
        <!-- </form> -->
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="row mb-5">
            <div class="col-md-6">
              <a href="/shop"><button class="btn btn-primary btn-sm btn-block">Continue Shopping</button></a>
            </div>
          </div>
        </div>
        <div class="col-md-6 pl-5">
          <div class="row justify-content-end">
            <div class="col-md-7">
              <div class="row">
                <div class="col-md-12 text-right border-bottom mb-5">
                  <h3 class=" h4 text-uppercase">Cart Totals</h3>
                </div>
              </div>
              <!-- <div class="row mb-3">
                <div class="col-md-6">
                  <span class="text-black">Subtotal</span>
                </div>
                <div class="col-md-6 text-right">
                  <strong class="text-black">$230.00</strong>
                </div>
              </div> -->
              <div class="row mb-5">
                <div class="col-md-6">
                  <span class="">Total</span>
                </div>
                <div class="col-md-6 text-right">
                  <strong class=""><%=cart.totalPrice%></strong>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <a href="/checkOut"><button class="btn btn-primary btn-sm py-3 btn-block" >Proceed To Checkout</button></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <%}%>
  </div>

  <%-include('../../layout/footer.ejs')%>